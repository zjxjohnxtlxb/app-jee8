var OmniFaces=OmniFaces||{EVENT:"omnifaces.event",VIEW_STATE_PARAM:"javax.faces.ViewState",CLIENT_WINDOW_PARAM:"javax.faces.ClientWindow"};
OmniFaces.Util=function(f,h){function k(a,b,c,g,d){g=g.replace(/^\s+|\s+$/g,"").split(/\s+/);for(var f=0;f<g.length;f++){var e=g[f];if(a[b])a[b](e,d);else if(a[c])a[c]("on"+e,d)}}function e(a,b,c){var g=a[b];g&&(a[b]=function(){c();return g.apply(this,arguments)})}var d={addEventListener:function(a,b,c){k(a,"addEventListener","attachEvent",b,c)},removeEventListener:function(a,b,c){k(a,"removeEventListener","detachEvent",b,c)},addOnloadListener:function(a){if("complete"===h.readyState)setTimeout(a);
else if(f.addEventListener||f.attachEvent)d.addEventListener(f,"load",a);else if("function"===typeof f.onload){var b=f.onload;f.onload=function(){b();a()}}else f.onload=a},addSubmitListener:function(a){d.addEventListener(h,"submit",a);f.mojarra&&e(mojarra,"jsfcljs",a);f.myfaces&&e(myfaces.oam,"submitForm",a);f.PrimeFaces&&e(PrimeFaces,"addSubmitParam",a)},resolveFunction:function(a){return"function"!==typeof a&&(a=f[a]||function(){}),a},getFacesForm:function(){for(var a=0;a<h.forms.length;a++)if(h.forms[a][OmniFaces.VIEW_STATE_PARAM])return h.forms[a];
f.jsf&&"Development"!=jsf.getProjectStage()||!f.console||!console.error||console.error("OmniFaces: Cannot find a JSF form in the document. Please add one.");return null},updateParameter:function(a,b,c){var g=new RegExp("(^|[?\x26#])"+b+"\x3d.*?([\x26#]|$)","i");c?(b=b+"\x3d"+encodeURIComponent(c),a=a?a.match(g)?a.replace(g,"$1"+b+"$2"):a+("\x26"+b):b):a=a.replace(g,"$2");"\x26"==a.charAt(0)&&(a=a.substring(1));return a},loadScript:function(a,b,c,g,f,e){c=d.resolveFunction(c);var l=d.resolveFunction(g),
k=d.resolveFunction(f),n=d.resolveFunction(e),m=h.createElement("script");g=h.head||h.documentElement;m.async=!0;m.src=a;m.setAttribute("crossorigin",b||"anonymous");m.onerror=function(){k()};m.onload=m.onreadystatechange=function(a,b){if(b||!m.readyState||/loaded|complete/.test(m.readyState)){m.onload=m.onreadystatechange=null;if(b)m.onerror();else l();m=null;n()}};c();g.insertBefore(m,null)}};return d}(window,document);
OmniFaces.Highlight=function(f,h){function k(){f.removeEventListener(this,"click input",k);var d=this.getAttribute("data-omnifaces-highlight-class");if(d){this.removeAttribute("data-omnifaces-highlight-class");d=new RegExp(" "+d,"g");this.className=this.className.replace(d,"");var a=this.getAttribute("data-omnifaces-highlight-label");a&&(this.removeAttribute("data-omnifaces-highlight-label"),a=e[this.id],a.className=a.className.replace(d,""))}}var e;return{apply:function(d,a,b){for(var c=h.getElementsByTagName("LABEL"),
g={},l=0;l<c.length;l++){var n=c[l],q=n.htmlFor;q&&(g[q]=n)}e=g;for(c=0;c<d.length;c++)if(l=d[c],g=h.getElementById(l),g||(l=h.getElementsByName(l))&&l.length&&(g=l[0]),g){g.className+=" "+a;g.setAttribute("data-omnifaces-highlight-class",a);if(l=e[g.id])l.className+=" "+a,g.setAttribute("data-omnifaces-highlight-label",!0);b&&(g.focus(),b=!1);f.addEventListener(g,"click input",k)}}}}(OmniFaces.Util,document);
OmniFaces.DeferredScript=function(f,h){function k(d){if(!(0>d||d>=e.length)){var a=e[d];f.loadScript(a.url,null,a.begin,a.success,a.error,function(){k(d+1)})}}var e=[];return{add:function(d,a,b,c){e.push({url:d,begin:a,success:b,error:c});1==e.length&&f.addOnloadListener(function(){k(0)})}}}(OmniFaces.Util,document);
OmniFaces.Unload=function(f,h,k,e){var d,a,b={init:function(c){if(k.XMLHttpRequest){if(null==d){var g=f.getFacesForm();if(!g)return;f.addEventListener(k,"onpagehide"in k?"pagehide":"onbeforeunload"in k&&!k.onbeforeunload?"beforeunload":"unload",function(){if(a)b.reenable();else try{var c=g.action,f=OmniFaces.EVENT+"\x3dunload\x26id\x3d"+d+"\x26"+OmniFaces.VIEW_STATE_PARAM+"\x3d"+encodeURIComponent(g[OmniFaces.VIEW_STATE_PARAM].value);if(h.sendBeacon)h.sendBeacon(c,new Blob([f],{type:"application/x-www-form-urlencoded"}));
else{var e=new XMLHttpRequest;e.open("POST",c,!1);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");e.send(f)}}catch(p){}});f.addSubmitListener(function(){b.disable()})}d=c;a=!1}},disable:function(){a=!0},reenable:function(){a=!1}};return b}(OmniFaces.Util,navigator,window,document);
OmniFaces.Push=function(f,h){function k(a,b,d,f,e,h,k){var c,g,l=this;l.open=function(){c&&1==c.readyState||(c=new WebSocket(a),c.onopen=function(a){null==g&&d(b);g=0},c.onmessage=function(a){var c=JSON.parse(a.data);f(c,b,a);if((a=k[c])&&a.length)for(c=0;c<a.length;c++)a[c]()},c.onclose=function(a){!c||1E3==a.code&&"Expired"==a.reason||1008==a.code||1005==a.code&&"Unknown channel"==a.reason||null==g||25<=g?h(a.code,b,a):(e(a.code,b,a),setTimeout(l.open,500*g++))})};l.close=function(){if(c){var a=
c;c=null;null==g;a.close()}}}function e(c){var b=a[c];if(b)return b;throw Error("Unknown channel: "+c);}var d=h.location.protocol.replace("http","ws")+"//",a={},b={init:function(c,g,e,n,q,p,r,m){p=f.resolveFunction(p);var l=g.split(/\?/)[0];if(h.WebSocket){if(!a[l]){var t=(c=c||"")&&0!=c.indexOf("/")?0==c.indexOf(":")?h.location.hostname:"":h.location.host;a[l]=new k(d+t+c+"/omnifaces.push/"+g,l,f.resolveFunction(e),f.resolveFunction(n),f.resolveFunction(q),p,r)}m&&b.open(l)}else p(-1,l)},open:function(a){e(a).open()},
close:function(a){e(a).close()}};return b}(OmniFaces.Util,window);
OmniFaces.InputFile=function(f,h){return{validate:function(k,e,d,a){if(!f.FileReader)return!0;h.getElementById(d).innerHTML="";for(d=0;d<e.files.length;d++){var b=e.files[d];if(b.size>a){a=b.name;var c;f.mojarra&&(c=e.form.enctype,e.form.enctype="application/x-www-form-urlencoded");e.type="text";e.type="file";a={fileName:a};a[OmniFaces.EVENT]="validationFailed";jsf.ajax.request(e.id,k,a);c&&(e.form.enctype=c);return!1}}return!0}}}(window,document);
OmniFaces.Form=function(f,h){f.addOnloadListener(function(){if(h.jsf){var f=jsf.getViewState;jsf.getViewState=function(e){var d=f(e);if("true"!=e.attributes["data-partialsubmit"])return d;var a=jsf.ajax.request.arguments,b=a?a[2].execute:null;if(!b||-1!=b.indexOf("@form")||-1!=b.indexOf("@all"))return d;var c=[];-1==b.indexOf("@none")&&(c=b.replace("@this",a[0].id).split(" ").map(encodeURIComponent),c.push(encodeURIComponent(e.id)));c.push(OmniFaces.VIEW_STATE_PARAM);c.push(OmniFaces.CLIENT_WINDOW_PARAM);
var g=[];d.replace(/([^=&]+)=([^&]*)/g,function(a,b,d){-1<c.indexOf(b)&&g.push(b+"\x3d"+d)});return g.join("\x26")}}})}(OmniFaces.Util,window);
OmniFaces.HashParam=function(f,h,k){function e(){if(!a){var b={execute:d,hash:h.location.hash.substring(1)};b[OmniFaces.EVENT]="setHashParamValues";jsf.ajax.request(f.getFacesForm(),null,b)}}var d,a;return{init:function(a){d=a;f.getFacesForm()&&(h.location.hash&&e(),f.addEventListener(h,"hashchange",e))},update:function(b,c){a=!0;var d=h.location,e=d.hash;e&&"#"==e.charAt(0)&&(e=e.substring(1));b=f.updateParameter(e,b,c);b!=e&&((e=h.history)&&e.pushState?(d=d.href.split(/#/,2)[0]+(b?"#":"")+b,e.pushState(null,
k.title,d)):d.hash=b);a=!1}}}(OmniFaces.Util,window,document);OmniFaces.ScriptParam=function(f,h,k){function e(d){if(!(d instanceof Object))return d;var a={},b;for(b in d)d[b]instanceof Function||d[b]instanceof Object||(a[b]=d[b]);return a}return{run:function(d,a){var b=f.getFacesForm();if(b){var c={},g;for(g in a)c[g]=JSON.stringify(e(a[g]));c.execute=d;c[OmniFaces.EVENT]="setScriptParamValues";jsf.ajax.request(b,null,c)}}}}(OmniFaces.Util,window,document);